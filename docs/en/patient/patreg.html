<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;500&#038;display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="../css/Normalize.css">
    <link rel="stylesheet" href="../css/imagehover.min.css">
    <link rel="stylesheet" href="../css/imagehover.css">
    <link rel="stylesheet" href="../css/all.min.css" />
    <link rel="stylesheet" href="../css/framework.css">
    <link rel="stylesheet" href="../css/master.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/animate.min.css">
    <link rel="stylesheet" href="../css/hover.css">
    <link rel="stylesheet" href="../css/signup.css">
    <title>Sign Up</title>
    <link rel="icon" type=" image/svg+xml" href="../imgs/logo.svg" />
</head>

<body>

    <div class="patreg d-flex justify-content-center align-center flex-column ">
        <div class="">
            <!-- "pc-width-convert  to make it small-->




            <div class="patlogo d-flex justify-content-center mt-15 mb-40 ">
                <img src="../imgs/logo.svg" alt="">
                <span class=" fw-bold fs-25 mt-35">FreeSmile</span>
            </div>

            <div class="text txt-c d-flex justify-content-center container mb-60">
                <p class=" fw-bold">Lorem ipsum dolor sit amet consectetur adipisicing elit. Delectus unde ratione dolores aspernatur culpa rem itaque sit, provident eaque? Vel blanditiis minus, esse veritatis ea distinctio exercitationem labor </p>

            </div>


            <div class=" container babyblue-background-color rad-10 ">
                <form class="row g-3 needs-validation p-30" method="POST">
                    <div class="col-12">
                        <label for="fname" class="form-label fw-bold">Full Name*</label>
                        <input type="text" name="fullname" autocomplete="off" class="form-control" id="fname" required placeholder="Enter Your Full Name At least Four Names" maxlength="50" minlength="18">
                        <p class="fullnameerror c-red fs-13"></p>
                    </div>



                    <div class="col-12">
                        <label for="username" class="form-label fw-bold">Username*</label>
                        <input type="text" pattern="^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$" name="username" autocomplete="off" required class="form-control " title="must begin with a letter and must be alphanumeric and underscore only" id="username" placeholder="Enter Your User Name (must begin with a letter and must be alphanumeric and underscore only)"
                            minlength="5" maxlength="50">
                        <p class="usernameerror c-red fs-13"></p>
                    </div>

                    <div class="col-12">
                        <label for="emial" class="form-label fw-bold">E-Mail*</label>
                        <input type="email" required name="email" autocomplete="off" class="form-control " id="email" placeholder="Enter Your E-Mail ">
                        <p class="emailerror c-red fs-13"></p>
                    </div>

                    <div class="col-12">
                        <label for="password" class="form-label fw-bold">Password*</label>
                        <input type="password" name="password" required minlength="10" maxlength="50" class="form-control " id="password" placeholder="Enter Your Password">
                        <p class="passworderror c-red fs-13"></p>
                    </div>

                    <div class="col-12 mb-60">
                        <label for="vpassword" class="form-label fw-bold">Confirm Password*</label>
                        <input type="password" name="verfiypassword" required class="form-control" id="vpassword" placeholder="Enter Your Password">
                        <p class=" c-red mt-1 fs-13  wrong-pass">The password dos'nt match</p>
                    </div>

                    <div class="date mb-40">
                        <div>
                            <p class=" fw-bold">Date Of Birth : </p>

                        </div>

                        <div class=" d-flex g-5">
                            <select class="form-select w-25 mr-15 " id="day" aria-label="Default select example" name="day">
                      <option value="" disabled selected> Day </option>
                        <option value="01" >1</option>
                        <option value="02">2</option>
                        <option value="03">3</option>
                        <option value="04">4</option>
                        <option value="05">5</option>
                        <option value="06">6</option>
                        <option value="07">7</option>
                        <option value="08">8</option>
                        <option value="09">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                         <option value="31">31</option>
                       
                        </select>

                            <select class="form-select w-25 mr-15 " id="month" aria-label="Default select example" name="month">
                      <option value="" disabled selected> Month </option>
                        <option value="01" >January</option>
                        <option value="02">February</option>
                        <option value="03">March</option>
                        <option value="04">April</option>
                        <option value="05">May</option>
                        <option value="06">June</option>
                        <option value="07">July</option>
                        <option value="08">August</option>
                        <option value="09">September</option>
                        <option value="10">October</option>
                        <option value="11">November </option>
                        <option value="12">December</option>
                     
                        </select>

                            <select class="form-select w-25 makeoptions " id="year" aria-label="Default select example" name="year">
                                  <option value="" disabled selected> Year </option>
                     
                        
                        </select>
                            <p class="birthdayerror c-red fs-13"></p>
                        </div>

                    </div>

                    <p class=" fw-bold mt-35 mb-25 phoneee">Phone Number : </p>
                    <div class="row  align-items-center mb-40">

                        <div class="col-4">
                            <select disabled class="removewebkit ">
                            <option  selected>+20</option>

                        </select>

                        </div>

                        <div class="d-flex justify-content-md-start col-8">
                            <input type="text" class="rad-10 p-10 w-80 phonenum" name="phonenum" placeholder="Enter your phone Number" minlength="10" maxlength="10">
                            <p class="phonenumerror c-red fs-13"></p>
                        </div>


                    </div>

                    <div class="gender mb-40">
                        <div>
                            <p class=" fw-bold">Gender : </p>
                        </div>

                        <div class="d-felx flex-row">

                            <div class="male ">
                                <div class="form-check ">
                                    <input class="form-check-input" checked type="radio" name="gender" id="male" value="true">
                                    <label class="form-check-label fw-bold" for="male">Male</label>
                                </div>
                            </div>
                            <div class="female ">
                                <div class="form-check ">
                                    <input class="form-check-input" type="radio" name="gender" id="fmale" value="false">
                                    <label class="form-check-label fw-bold" for="false">Female</label>
                                </div>

                            </div>


                        </div>
                    </div>

                    <div class="col-12 mb-30">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="gridCheck" required>
                            <label class="form-check-label fs-15" for="gridCheck"> By Checking me out you  agree for our Terms , Policy and Cockies policy </label>

                        </div>

                    </div>

                    <div class="col-12 mb-20 d-flex justify-content-center">
                        <button type="submit" id="submit" class="btn btn-primary form-control"> Verify E-Mail</button>
                    </div>

                    <p class=" txt-c fs-20 fw-bold mb-40">Already Get an Account ? <a href="../login.html">Login</a></p>


                    <div class="  d-flex align-center justify-content-center footlink  mb-10">
                        <a href="#" class=" mr-20">Terms</a>
                        <a href="#" class=" mr-20 ">Privacy</a>
                        <a href="#" class=" mr-20 ">Security</a>
                        <a href="#" class=" ">Contatcts</a>

                    </div>

                </form>

            </div>


        </div>

    </div>






    <script src="../js/bootstrap.bundle.min.js "></script>
    <script src="../js/all.min.js"></script>
    <script src="../js/popper.min.js "></script>
    <script src="../js/jquery-3.6.1.min.js "></script>
    <script src="../js/helper.js"></script>


    <script>
        (async() => {
            let errorMessages;

            let apiUrl = await GetServerDomain();


            $("#fname").keypress(function(event) {
                if (isNaN(event.key) || event.keyCode == 8 || event.keyCode == 32) {

                } else {
                    event.preventDefault();
                }
            })

            $("#lname").keypress(function(event) {

                if (isNaN(event.key) || event.keyCode == 8 || event.keyCode == 32) {

                } else {
                    event.preventDefault();
                }
            })

            $("#vpassword").keyup(function() {
                if ($("#vpassword").val() != $("#password").val()) {
                    // $(".wrong-pass").css("display", "block");
                    document.querySelector(".wrong-pass").style.display = "block"

                } else {
                    $(".wrong-pass").css("display", "none");
                }
            })

            $("#submit").click(function(event) {
                if ($("#vpassword").val() != $("#password").val()) {
                    event.preventDefault();
                }
            })

            let date = new Date();
            let curyear = date.getFullYear();

            for (i = date.getFullYear() - 120; i <= date.getFullYear() - 5; i++) {
                let selectElem = document.querySelector(".makeoptions");
                selectElem.innerHTML += ("<option value=" + i + ">" + i + "</option>");
            }

            let language = window.localStorage.getItem("language")

            if (language == null) {
                language = "en";
            } else {
                language = window.localStorage.getItem("language");
            }

            $("form").submit(function(event) {

                event.preventDefault();

                let fullName = $("#fname").val();
                let userName = $("#username").val();
                let email = $("#email").val();
                let birthDay = $("#year").val() + "-" + $("#month").val() + "-" + $("#day").val() || "  -  -  ";
                let gender = $('input[name="gender"]:checked').val();
                let inPassword = $("#password").val();
                let phoneNumber = $(".phonenum").val();

                let obData = {
                    "username": userName,
                    "email": email,
                    "password": inPassword,
                    "fullname": fullName,
                    "phone": phoneNumber,
                    "gender": gender == true,
                    "birthdate": birthDay
                }
                let jsonData = JSON.stringify(obData);

                $.ajax({
                    "method": "POST",
                    "url": apiUrl + "/api/Users/RegisterPatient",
                    "xhrFields": {
                        "withCredentials": true
                    },
                    "headers": {
                        "Content-Type": "application/json",
                        "Accept-Language": language
                    },
                    "data": jsonData,
                    success: function(data, st, xhr) {
                        window.sessionStorage.setItem("regeter", "reg");
                        window.location.href = "otp.html"
                    },
                    error: function(xhr, status, err) {
                        errorMessages = xhr.responseJSON;
                        objofmessage = errorMessages.errors
                        var key, keys = Object.keys(objofmessage);
                        var n = keys.length;
                        var newobj = {}
                        while (n--) {
                            key = keys[n];
                            newobj[key.toLowerCase()] = objofmessage[key];
                        }
                        console.log(newobj);
                        if (newobj.hasOwnProperty('email')) {
                            $(".emailerror").text(newobj.email[0]);
                            $(".emailerror").css('display', 'block');
                        }
                        if (newobj.hasOwnProperty('fullname')) {
                            $(".fullnameerror").text(newobj.fullname[0]);
                            $(".fullnameerror").css('display', 'block');
                        }
                        if (newobj.hasOwnProperty('username')) {
                            $(".usernameerror").text(newobj.username[0]);
                            $(".usernameerror").css('display', 'block');
                        }
                        if (newobj.hasOwnProperty('password')) {
                            $(".passworderror").text(newobj.password[0]);
                            $(".passworderror").css('display', 'block');
                        }
                        if (newobj.hasOwnProperty('phone')) {
                            $(".phonenumerror").text(newobj.phone[0]);
                            $(".phonenumerror").css('display', 'block');
                        }

                    }
                })

            })
        })();
    </script>
</body>

</html>